<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.57.2" />
    <meta name="description" content="">


    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>3. Store Golden AMI metadata :: APN Equip Labs</title>

    
    <link href="/css/nucleus.css?1573162801" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1573162801" rel="stylesheet">
    <link href="/css/hybrid.css?1573162801" rel="stylesheet">
    <link href="/css/featherlight.min.css?1573162801" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1573162801" rel="stylesheet">
    <link href="/css/auto-complete.css?1573162801" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1573162801" rel="stylesheet">
    <link href="/css/theme.css?1573162801" rel="stylesheet">
    <link href="/css/hugo-theme.css?1573162801" rel="stylesheet">
    
      <link href="/css/theme-darkblue.css?1573162801" rel="stylesheet">
    

    <script src="/js/jquery-3.3.1.min.js?1573162801"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/ami-inspector-lab/store_golden_ami_metadata/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a href=".."><img src="/images/logo.jpg" ></a>
    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1573162801"></script>
<script type="text/javascript" src="/js/auto-complete.js?1573162801"></script>
<script type="text/javascript">
    
        var baseurl = "http:\/\/example.org\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1573162801"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/vpc-lab/" title="VPC Lab" class="dd-item 
        
        
        
        ">
      <a href="/vpc-lab/">
          <b></b>VPC Lab
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/vpc-lab/navigate-the-vpc-dashboard/" title="1. Navigate the VPC Dashboard" class="dd-item ">
        <a href="/vpc-lab/navigate-the-vpc-dashboard/">
        1. Navigate the VPC Dashboard
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/vpc-lab/what-did-vpc-wizard-create/" title="2. What Did VPC Wizard Create ?" class="dd-item ">
        <a href="/vpc-lab/what-did-vpc-wizard-create/">
        2. What Did VPC Wizard Create ?
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/vpc-lab/create-ec2-instance/" title="3. Create Public EC2 Instance" class="dd-item ">
        <a href="/vpc-lab/create-ec2-instance/">
        3. Create Public EC2 Instance
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/vpc-lab/test-public-ec2-instance/" title="4. Test Public EC2 Instance" class="dd-item ">
        <a href="/vpc-lab/test-public-ec2-instance/">
        4. Test Public EC2 Instance
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/vpc-lab/test-private-ec2-instance/" title="5. Test Private EC2 Instance" class="dd-item ">
        <a href="/vpc-lab/test-private-ec2-instance/">
        5. Test Private EC2 Instance
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/vpc-lab/clean-up-resources/" title="6. Clean Up Resources" class="dd-item ">
        <a href="/vpc-lab/clean-up-resources/">
        6. Clean Up Resources
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/vpc-lab/additional-resources/" title="7. Additional Resources" class="dd-item ">
        <a href="/vpc-lab/additional-resources/">
        7. Additional Resources
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/ec2-lab/" title="EC2 Lab" class="dd-item 
        
        
        
        ">
      <a href="/ec2-lab/">
          <b></b>EC2 Lab
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/ec2-lab/create-new-key-pair/" title="1. Create New Key Pair" class="dd-item ">
        <a href="/ec2-lab/create-new-key-pair/">
        1. Create New Key Pair
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ec2-lab/launch-ec2-web-server/" title="2. Launch EC2 Web Server" class="dd-item ">
        <a href="/ec2-lab/launch-ec2-web-server/">
        2. Launch EC2 Web Server
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ec2-lab/browse-your-web-server/" title="3. Browse your Web Server" class="dd-item ">
        <a href="/ec2-lab/browse-your-web-server/">
        3. Browse your Web Server
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/ec2-lab-windows/" title="EC2 Lab (Windows)" class="dd-item 
        
        
        
        ">
      <a href="/ec2-lab-windows/">
          <b></b>EC2 Lab (Windows)
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/ec2-lab-windows/configure-network/" title="1. Configure Network" class="dd-item ">
        <a href="/ec2-lab-windows/configure-network/">
        1. Configure Network
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ec2-lab-windows/configure-security-group/" title="2. Configure a Security Group" class="dd-item ">
        <a href="/ec2-lab-windows/configure-security-group/">
        2. Configure a Security Group
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ec2-lab-windows/configure-an-iam-user-and-policy/" title="3. Configure an IAM User and Policy" class="dd-item ">
        <a href="/ec2-lab-windows/configure-an-iam-user-and-policy/">
        3. Configure an IAM User and Policy
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ec2-lab-windows/create-windows-ec2-instance/" title="4. Create a Windows EC2 Instance" class="dd-item ">
        <a href="/ec2-lab-windows/create-windows-ec2-instance/">
        4. Create a Windows EC2 Instance
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ec2-lab-windows/validate-iam-policy/" title="5. Validate IAM Policy" class="dd-item ">
        <a href="/ec2-lab-windows/validate-iam-policy/">
        5. Validate IAM Policy
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ec2-lab-windows/cleanup/" title="6. Cleanup" class="dd-item ">
        <a href="/ec2-lab-windows/cleanup/">
        6. Cleanup
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/iam-lab/" title="IAM Lab" class="dd-item 
        
        
        
        ">
      <a href="/iam-lab/">
          <b></b>IAM Lab
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/iam-lab/create-iam-group/" title="1. Create IAM Group" class="dd-item ">
        <a href="/iam-lab/create-iam-group/">
        1. Create IAM Group
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/iam-lab/create-iam-user/" title="2. Create IAM User" class="dd-item ">
        <a href="/iam-lab/create-iam-user/">
        2. Create IAM User
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/iam-lab/test-iam-user/" title="3. Test IAM User" class="dd-item ">
        <a href="/iam-lab/test-iam-user/">
        3. Test IAM User
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/iam-lab/create-iam-role/" title="4. Create IAM Role" class="dd-item ">
        <a href="/iam-lab/create-iam-role/">
        4. Create IAM Role
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/iam-lab/clean-up-resources/" title="5. Clean Up Resources" class="dd-item ">
        <a href="/iam-lab/clean-up-resources/">
        5. Clean Up Resources
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/iam-lab/additional-resources/" title="6. Additional resources" class="dd-item ">
        <a href="/iam-lab/additional-resources/">
        6. Additional resources
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/s3-lab/" title="S3 Lab" class="dd-item 
        
        
        
        ">
      <a href="/s3-lab/">
          <b></b>S3 Lab
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/s3-lab/create-s3-bucket/" title="1. Create S3 Bucket" class="dd-item ">
        <a href="/s3-lab/create-s3-bucket/">
        1. Create S3 Bucket
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/s3-lab/add-object-to-s3-bucket/" title="2. Add Object to S3 Bucket" class="dd-item ">
        <a href="/s3-lab/add-object-to-s3-bucket/">
        2. Add Object to S3 Bucket
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/s3-lab/move-s3-object/" title="3. Move S3 Object" class="dd-item ">
        <a href="/s3-lab/move-s3-object/">
        3. Move S3 Object
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/s3-lab/enable-bucket-versioning/" title="4. Enable Bucket Versioning" class="dd-item ">
        <a href="/s3-lab/enable-bucket-versioning/">
        4. Enable Bucket Versioning
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/s3-lab/delete-an-object-and-bucket/" title="5. Delete an Object and Bucket" class="dd-item ">
        <a href="/s3-lab/delete-an-object-and-bucket/">
        5. Delete an Object and Bucket
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/s3-lab/additional-resources/" title="6. Additional resources" class="dd-item ">
        <a href="/s3-lab/additional-resources/">
        6. Additional resources
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/monitoring-lab/" title="Monitoring Lab" class="dd-item 
        
        
        
        ">
      <a href="/monitoring-lab/">
          <b></b>Monitoring Lab
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/monitoring-lab/create-sns-topic/" title="1. Create SNS Topic" class="dd-item ">
        <a href="/monitoring-lab/create-sns-topic/">
        1. Create SNS Topic
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/monitoring-lab/create-iam-role/" title="2. Create IAM Role" class="dd-item ">
        <a href="/monitoring-lab/create-iam-role/">
        2. Create IAM Role
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/monitoring-lab/launch-ec2-instance/" title="3. Launch EC2 Instance" class="dd-item ">
        <a href="/monitoring-lab/launch-ec2-instance/">
        3. Launch EC2 Instance
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/monitoring-lab/configure-cloudwatch-alarm/" title="4. Configure CloudWatch Alarm" class="dd-item ">
        <a href="/monitoring-lab/configure-cloudwatch-alarm/">
        4. Configure CloudWatch Alarm
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/monitoring-lab/monitor-ec2-cpu-utilization/" title="5. Monitor EC2 CPU Utilization" class="dd-item ">
        <a href="/monitoring-lab/monitor-ec2-cpu-utilization/">
        5. Monitor EC2 CPU Utilization
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/monitoring-lab/monitor-ec2-system-log/" title="6. Monitor EC2 System Log" class="dd-item ">
        <a href="/monitoring-lab/monitor-ec2-system-log/">
        6. Monitor EC2 System Log
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/monitoring-lab/monitor-ec2-tag/" title="7. Monitor EC2 Tag" class="dd-item ">
        <a href="/monitoring-lab/monitor-ec2-tag/">
        7. Monitor EC2 Tag
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/monitoring-lab/monitor-estimated-charges/" title="8. Monitor Estimated Charges" class="dd-item ">
        <a href="/monitoring-lab/monitor-estimated-charges/">
        8. Monitor Estimated Charges
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/security-lab/" title="Security Lab" class="dd-item 
        
        
        
        ">
      <a href="/security-lab/">
          <b></b>Security Lab
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/security-lab/create-sns-topic/" title="1. Create SNS Topic" class="dd-item ">
        <a href="/security-lab/create-sns-topic/">
        1. Create SNS Topic
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/security-lab/create-iam-role/" title="2. Create IAM Role" class="dd-item ">
        <a href="/security-lab/create-iam-role/">
        2. Create IAM Role
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/security-lab/launch-ec2-instance/" title="3. Launch EC2 Instance" class="dd-item ">
        <a href="/security-lab/launch-ec2-instance/">
        3. Launch EC2 Instance
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/security-lab/monitor-ec2-security-log/" title="6. Monitor EC2 Security Log" class="dd-item ">
        <a href="/security-lab/monitor-ec2-security-log/">
        6. Monitor EC2 Security Log
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/security-lab/create-alarm-for-security-log/" title="7. Create Alarm For Security Log" class="dd-item ">
        <a href="/security-lab/create-alarm-for-security-log/">
        7. Create Alarm For Security Log
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/security-lab/test-security-alarm/" title="8. Test Security Alarm" class="dd-item ">
        <a href="/security-lab/test-security-alarm/">
        8. Test Security Alarm
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/security-lab/query-security-log/" title="10. Query Security Log" class="dd-item ">
        <a href="/security-lab/query-security-log/">
        10. Query Security Log
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/cloudformation-lab/" title="CloudFormation Lab" class="dd-item 
        
        
        
        ">
      <a href="/cloudformation-lab/">
          <b></b>CloudFormation Lab
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/cloudformation-lab/explore_template/" title="1. Exploring the templates" class="dd-item ">
        <a href="/cloudformation-lab/explore_template/">
        1. Exploring the templates
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cloudformation-lab/create_stack/" title="2. Create Stack" class="dd-item ">
        <a href="/cloudformation-lab/create_stack/">
        2. Create Stack
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cloudformation-lab/change_stack/" title="3. Change Your Stack" class="dd-item ">
        <a href="/cloudformation-lab/change_stack/">
        3. Change Your Stack
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cloudformation-lab/update_stack/" title="4. Update Stack" class="dd-item ">
        <a href="/cloudformation-lab/update_stack/">
        4. Update Stack
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/ami-inspector-lab/" title="Golden AMI Assessment Lab" class="dd-item 
        parent
        
        
        ">
      <a href="/ami-inspector-lab/">
          <b></b>Golden AMI Assessment Lab
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/ami-inspector-lab/solutions_overview/" title="1. Solutions Overview" class="dd-item ">
        <a href="/ami-inspector-lab/solutions_overview/">
        1. Solutions Overview
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ami-inspector-lab/tag_golden_ami/" title="2. Tag your Golden AMI" class="dd-item ">
        <a href="/ami-inspector-lab/tag_golden_ami/">
        2. Tag your Golden AMI
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ami-inspector-lab/store_golden_ami_metadata/" title="3. Store Golden AMI metadata" class="dd-item active">
        <a href="/ami-inspector-lab/store_golden_ami_metadata/">
        3. Store Golden AMI metadata
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ami-inspector-lab/create_exec_role_for_contasses/" title="4. Create Lambda Execution role" class="dd-item ">
        <a href="/ami-inspector-lab/create_exec_role_for_contasses/">
        4. Create Lambda Execution role
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ami-inspector-lab/create_snstopic_assesmentcomplete/" title="5. Create SNS Topic " class="dd-item ">
        <a href="/ami-inspector-lab/create_snstopic_assesmentcomplete/">
        5. Create SNS Topic 
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ami-inspector-lab/create_continuousassess_lambda/" title="6. Create Lambda Functions" class="dd-item ">
        <a href="/ami-inspector-lab/create_continuousassess_lambda/">
        6. Create Lambda Functions
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ami-inspector-lab/connect_analyzerlambda_sns/" title="7. Connect Analyzer to Topic" class="dd-item ">
        <a href="/ami-inspector-lab/connect_analyzerlambda_sns/">
        7. Connect Analyzer to Topic
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ami-inspector-lab/test_assesment/" title="8. Test Assesment" class="dd-item ">
        <a href="/ami-inspector-lab/test_assesment/">
        8. Test Assesment
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ami-inspector-lab/scheduling_the_continuation/" title="9. Configure CloudWatch events" class="dd-item ">
        <a href="/ami-inspector-lab/scheduling_the_continuation/">
        9. Configure CloudWatch events
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      
    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'>Welcome</a> > <a href='/ami-inspector-lab/'>Golden AMI Assessment Lab</a> > 3. Store Golden AMI metadata
          
         
          
         
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">

    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              3. Store Golden AMI metadata
            </h1>
          

        



<p><img src="/AMI Inspector Lab/images/StoreMetaParam.png" alt="" /></p>

<p>In this section we will walk through the process of construction the golden AMI metadata and store them in <a href="https://docs.aws.amazon.com/systems-manager/latest/userguide/systems-manager-parameter-store.html">AWS Systems Manager Parameter Store</a> our metadata will be specified in JSON format and will contain the following information for each golden AMI:</p>

<ul>
<li>The <strong>Ami-Id</strong> is the golden AMI id that we tagged in the previous step ( Hopefully you&rsquo;ve taken note of that, otherwise please review the previous step ).</li>
<li>The <strong>InstanceType</strong> is the EC2 instance type our solution will use to launch the golden AMI with and run the inspection on.</li>
<li>The <strong>UserData</strong> section will contain our bootstrap instructions to install AWS Inspector Agent.</li>
</ul>

<hr />

<p><strong>IMPORTANT NOTE:</strong></p>

<p>You must use a compatible InstanceType that is supported by your AMI, to find the compatible <code>InstanceType</code> for your golden AMI follow below steps. Or just use t2.large for simplicity. To find a compatible <code>InstanceType</code> for your golden AMI:</p>

<ol>
<li>Sign in to the <a href="https://console.aws.amazon.com/console/home">AWS Management Console</a> and navigate to the <a href="https://console.aws.amazon.com/ec2/">EC2 console</a>.</li>
<li>Choose <strong>Launch Instance</strong>. On the <strong>Choose an Amazon Machine Image</strong> (<strong>AMI</strong>) page, choose <strong>My AMIs</strong>.</li>
<li>Type the <strong>AMI ID</strong> that you noted in Step A in the <strong>Search my AMIs</strong> box, and then choose <strong>Enter</strong>.</li>
<li>The search result will contain your golden AMI. To choose it, choose <strong>Select</strong>.</li>
<li>Locate any available <strong>Instance Type</strong> and then note the corresponding value in the <strong>Type</strong> column.</li>
<li>Choose <strong>Cancel</strong>.</li>
</ol>

<p>The solution will launch the chosen <code>InstanceType</code> every time the vulnerability assessment runs.</p>

<hr />

<p>For the <code>UserData</code> section you will need to create a <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/user-data.html">User Data</a> script to install and start the <a href="https://docs.aws.amazon.com/inspector/latest/userguide/inspector_agents.html">Amazon Inspector agent</a>.
The script automates the installation of software packages when an EC2 instance launches for the first time.</p>

<p>In the following steps, we will construct an operating system specific, JSON-compatible user-data script that installs and starts the Amazon Inspector agent.</p>

<ol>
<li><p><strong>Identify the command that installs the Amazon Inspector agent</strong></p>

<p>As described in <a href="http://docs.aws.amazon.com/inspector/latest/userguide/inspector_installing-uninstalling-agents.html">Installing Amazon Inspector Agents</a> documentation, the following shell command installs the Amazon Inspector agent on an Amazon Linux-based EC2 instance. This commands essentially downloads a bash installation bashscript from AWS public repository and run a bash install command to execute the script</p>

<pre><code>wget https://d1wk0tztpsntt1.cloudfront.net/linux/latest/install
bash install
</code></pre>

<p>To find this command for other operating systems, see <a href="http://docs.aws.amazon.com/inspector/latest/userguide/inspector_installing-uninstalling-agents.html">Installing Amazon Inspector Agents</a>.</p></li>

<li><p><strong>Identify the command that starts the Amazon Inspector agent</strong></p>

<p>Also described in <a href="http://docs.aws.amazon.com/inspector/latest/userguide/inspector_installing-uninstalling-agents.html">Installing Amazon Inspector Agents</a> documentation, below command starts the Amazon Inspector agent on an Amazon Linux-based EC2 instance.</p>

<pre><code>sudo /etc/init.d/awsagent start
</code></pre>

<p>To find this command for other operating systems, see <a href="http://docs.aws.amazon.com/inspector/latest/userguide/inspector_agents.html">Amazon Inspector Agents</a>.</p></li>

<li><p><strong>Create a script by concatenating the commands from the preceding two steps</strong></p>

<p>Combining all the commands, you could consturct a script to install and start the <a href="http://docs.aws.amazon.com/inspector/latest/userguide/inspector_agents.html">Amazon Inspector Agents</a>.</p>

<p>And to make this script User Data compatible you will need to explicitly specify the shell at the beginning of the script, so in practice your script should look like below</p>

<pre><code>#!/bin/bash
wget https://d1wk0tztpsntt1.cloudfront.net/linux/latest/install
bash install
sudo /etc/init.d/awsagent start
</code></pre></li>

<li><p><strong>Make the user-data script JSON compatible</strong></p>

<p>Now, because we need to specify the user data in JSON, and specifying new line character in JSON is a big hassle, to make it simple we can  replace all the new line characters to <code>;</code>. You can use third party online tools to escape all the &ldquo; signs and new line characters.
Once you are done, your user data script shoulw look like below. (For simplicity, just use the script below in your JSON).</p>

<p><strong>JSON-compatible-user-data-of-first-AMI</strong></p>

<pre><code>&quot;#!/bin/bash \n wget https://d1wk0tztpsntt1.cloudfront.net/linux/latest/install;bash install;/etc/init.d/awsagent start&quot;
</code></pre></li>

<li><p><strong>Create a JSON document of metadata of all your golden AMIs.</strong></p>

<p>We are now ready to consturct our JSON metadata, ppen your notepad or text editor copy and paste the JSON below and replace</p>

<ul>
<li><strong>instance-type-of-first-AMI</strong> with the instance type you will use to launch the AMI to be inspected.</li>
<li><strong>AMI-ID-of-first-AMI</strong> with the AMI id of your golden AMI.</li>
<li><strong>JSON-compatible-user-data-of-first-AMI</strong> with the string in previous step above.</li>
</ul>

<p>Use the following template to create a JSON document:</p>

<pre><code>[   
    { 
        &quot;instanceType&quot;: &quot;instance-type-of-first-AMI&quot;, 
        &quot;ami-id&quot;: &quot;AMI-ID-of-first-AMI&quot;, 
        &quot;userData&quot;: &quot;JSON-compatible-user-data-of-first-AMI&quot;
     }
]
</code></pre>

<p>once it is done, your JSON should look like this.</p>

<pre><code>[   
    { 
        &quot;instanceType&quot;: &quot;t2.large&quot;, 
        &quot;ami-id&quot;: &quot;ami-133213&quot;, 
        &quot;userData&quot;: &quot;#!/bin/bash \n wget https://d1wk0tztpsntt1.cloudfront.net/linux/latest/install;bash install;/etc/init.d/awsagent start&quot;
     }
]
</code></pre></li>

<li><p>Once you have everything setup your JSON needs to be converted into a string, because we will need to encapsulate this JSON once again inside a string value of our CloudFormation template ( you will see this in next step.)</p>

<p>This is just a matter of converting your JSON and escaping the &ldquo; signs. You can use use online tools like <a href="https://onlinetexttools.com/json-stringify-text">https://onlinetexttools.com/json-stringify-text</a> or manually do it by hand.</p>

<p>Again for simplicity you can just copy the string below and <strong>replace</strong> the <code>ami-0fe2fc7acf5400b25</code> with your <strong>prefered ami</strong>.</p>

<pre><code>&quot;[{ \&quot;instanceType\&quot;: \&quot;t2.large\&quot;,\&quot;ami-id\&quot;: \&quot;ami-0fe2fc7acf5400b25\&quot;, \&quot;userData\&quot;: \&quot;#!/bin/bash \\n wget https://d1wk0tztpsntt1.cloudfront.net/linux/latest/install;bash install;/etc/init.d/awsagent start\&quot; }]&quot;
</code></pre>

<p>Now that you have created the Stringified JSON of your golden AMI metadata, we will store this JSON document in a Systems Manager parameter. But instead of specifying the parameter store through the console, we will be using <a href="https://aws.amazon.com/cloudformation/">AWS CloudFormation</a> to allow us to make this process repeatable in the future.. Why do we do this? Because we are AWSome ! Follow below steps to do so.</p></li>

<li><p><strong>Create an AWS Systems Manager parameter using CloudFormation</strong></p>

<hr />

<p><strong>IMPORTANT NOTE:</strong></p>

<p>In the following steps you will need to construct your CloudFormation template in YAML format.
YAML format allows you to put comments in the template by placing in # in front of the line, so it&rsquo;s quite handy.
On the flip side however, it is indent sensitive, so make sure you specify the Key and values at the right level of indentation.</p>

<p>Practice makes perfect, therefore when building the template, we will be providing a high level instruction on how to construct it.
We will also provide reference guide / example from public documentation to help you.
The purpose of this is so that you could get used to exploring CloudFormation documentation and get acustomed with the syntax.</p>

<p>However if you are completely stuck, don&rsquo;t hesitate to get help from Lab instructor or take a peek at the <strong>ARE YOU STUCK?</strong> section to peek on the solution.</p>

<hr />

<p>Reference: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ssm-parameter.html">https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ssm-parameter.html</a></p>

<ul>
<li>Open your notepad / text editor, create a file named <code>GoldenAMIParameters.yml</code></li>
<li>Create a <code>Resource:</code> template section <a href="https://docs.aws.amazon.com/en_pv/AWSCloudFormation/latest/UserGuide/template-anatomy.html">Reference</a></li>
<li>Create a resource under the section named <code>AMIMetadata</code> of type <code>AWS::SSM::Parameter</code>.</li>
<li>The name properties of the parameter store is to be called <code>ContinuousAssessmentInput</code></li>
<li>The type properties of the parameter store is <code>String</code></li>
<li>The value properties of the parameter store is the String you&rsquo;ve created in step 6 above.</li>
<li>The Description properties is <code>Continuous golden AMI vulnerability assessment process metadata.</code></li>
</ul>

<p><details><summary> <strong>ARE YOU STUCK ? :(</strong> - It&rsquo;s OK CLICK HERE to see the solution</summary>
<p></p>

<pre><code>Resources:
    GoldenAMIParameter:
        Type: &quot;AWS::SSM::Parameter&quot;
        Properties:
            Name: &quot;ContinuousAssessmentInput&quot;
            Type: &quot;String&quot;
            Value: &quot;[{ \&quot;instanceType\&quot;: \&quot;t2.large\&quot;,\&quot;ami-id\&quot;: \&quot;ami-0e2b940b603bf07f3\&quot;, \&quot;userData\&quot;: \&quot;#!/bin/bash \\n wget https://d1wk0tztpsntt1.cloudfront.net/linux/latest/install;bash install;/etc/init.d/awsagent start\&quot; }]&quot;
            Description: &quot;Continuous golden AMI vulnerability assessment process metadata.&quot;
</code></pre>

<p>Copy and paste this into the <code>GoldenAMIParameters.yml</code></p>

<p></p>
</detail></p></li>

<li><p><strong>Deploys the CloudFormation Template</strong></p>

<p>Now that you&rsquo;ve construct the template, it&rsquo;s time to deploy the stack, do do that please follow the <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-console-create-stack.html">Creating a Stack on the AWS CloudFormation Console</a> guide to create your stack.</p>

<p>Specify Stack <code>GoldenAMIParameters</code> as the stack name for simplicity.</p>

<p>Once you&rsquo;ve launched your stack review the <code>Resources</code> Tab of the launch stack to identify the resouce it&rsquo;s created. You should see an entry with  GoldenAMIParameter in Logical ID and ContinuousAssessmentInput in Physical ID.</p>

<p><a href="https://ap-southeast-2.console.aws.amazon.com/systems-manager/parameters?region=ap-southeast-2">Click here</a> to go to the Systems Manager Parameter Store console, and confirm you see the ContinuousAssesmentInput.</p></li>
</ol>

<p><strong>Congratulations !!!</strong></p>

<p>You have built a template from scratch ! Not Bad !
But we are just about to get started, let&rsquo;s move on to next stage to implement the actual solution stack.</p>


<footer class=" footline" >
	
</footer>


        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/ami-inspector-lab/tag_golden_ami/" title="2. Tag your Golden AMI"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/ami-inspector-lab/create_exec_role_for_contasses/" title="4. Create Lambda Execution role" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1573162801"></script>
    <script src="/js/perfect-scrollbar.min.js?1573162801"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1573162801"></script>
    <script src="/js/jquery.sticky.js?1573162801"></script>
    <script src="/js/featherlight.min.js?1573162801"></script>
    <script src="/js/highlight.pack.js?1573162801"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1573162801"></script>
    <script src="/js/learn.js?1573162801"></script>
    <script src="/js/hugo-learn.js?1573162801"></script>

    <link href="/mermaid/mermaid.css?1573162801" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1573162801"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

